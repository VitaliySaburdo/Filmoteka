{"mappings":"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","sources":["src/js/gallery.js","src/js/pagination.js","src/js/markup-gallery.js"],"sourcesContent":["import newsApiService from './api-services';\nimport { addToStorage } from './local-storage';\nimport { generatePagination } from './pagination';\nimport { renderGalleryFilms } from './markup-gallery';\nimport { Loading } from 'notiflix/build/notiflix-loading-aio';\n\nconst ApiService = new newsApiService();\n\nasync function startGalleryFilms() {\n  Loading.standard();\n  try {\n    const [genresData, movieData] = await Promise.all([\n      ApiService.getGenres(),\n      ApiService.fetchTrendingMovie(),\n    ]);\n\n    addToStorage('genresList', genresData.genres);\n    renderGalleryFilms(movieData.results);\n    generatePagination('', 500);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    Loading.remove(300);\n  }\n}\nstartGalleryFilms();\n","import newsApiService from './api-services';\nimport { renderGalleryFilms } from './markup-gallery';\n\nconst ApiService = new newsApiService();\n\nlet totalItems;\nlet query;\n\nexport function generatePagination(querySearch, itemsCount, page) {\n  totalItems = itemsCount;\n  query = querySearch;\n\n  const paginationContainer = document.querySelector('.pagination');\n  paginationContainer.innerHTML = '';\n\n  if (totalItems <= 1) {\n    document.querySelector('.next').style.display = 'none';\n    document.querySelector('.prev').style.display = 'none';\n    return;\n  } else {\n    document.querySelector('.next').style.display = 'block';\n    document.querySelector('.prev').style.display = 'block';\n  }\n\n  if (totalItems <= 1) {\n    return;\n  }\n\n  if (page) {\n    ApiService.currentPage = 1;\n  }\n\n  const createPageElement = (pageNumber, isActive) => {\n    const li = document.createElement('li');\n    li.textContent = pageNumber;\n    li.classList.add('page');\n    if (isActive) {\n      li.classList.add('active');\n    }\n    li.addEventListener('click', async () => {\n      ApiService.currentPage = pageNumber;\n      handleButtonClick();\n      backToTop();\n    });\n    return li;\n  };\n\n  const paginationFragment = document.createDocumentFragment();\n\n  if (totalItems <= 7) {\n    for (let i = 1; i <= totalItems; i++) {\n      paginationFragment.appendChild(\n        createPageElement(i, i === ApiService.currentPage)\n      );\n    }\n  } else {\n    if (ApiService.currentPage <= 4) {\n      for (let i = 1; i <= 6; i++) {\n        paginationFragment.appendChild(\n          createPageElement(i, i === ApiService.currentPage)\n        );\n      }\n      paginationFragment.appendChild(document.createElement('li')).textContent =\n        '...';\n      paginationFragment.appendChild(createPageElement(totalItems, false));\n    } else if (ApiService.currentPage > totalItems - 4) {\n      paginationFragment.appendChild(createPageElement(1, false));\n      paginationFragment.appendChild(document.createElement('li')).textContent =\n        '...';\n      for (let i = totalItems - 5; i <= totalItems; i++) {\n        paginationFragment.appendChild(\n          createPageElement(i, i === ApiService.currentPage)\n        );\n      }\n    } else {\n      paginationFragment.appendChild(createPageElement(1, false));\n      paginationFragment.appendChild(document.createElement('li')).textContent =\n        '...';\n      for (\n        let i = ApiService.currentPage - 2;\n        i <= ApiService.currentPage + 2;\n        i++\n      ) {\n        paginationFragment.appendChild(\n          createPageElement(i, i === ApiService.currentPage)\n        );\n      }\n      paginationFragment.appendChild(document.createElement('li')).textContent =\n        '...';\n      paginationFragment.appendChild(createPageElement(totalItems, false));\n    }\n  }\n  paginationContainer.appendChild(paginationFragment);\n}\n\nconst nextButton = document.querySelector('.next');\nnextButton.addEventListener('click', async () => {\n  if (ApiService.currentPage < totalItems) {\n    ApiService.currentPage++;\n    handleButtonClick();\n    backToTop();\n  }\n});\n\nconst prevButton = document.querySelector('.prev');\nprevButton.addEventListener('click', async () => {\n  if (ApiService.currentPage > 1) {\n    ApiService.currentPage--;\n    handleButtonClick();\n    backToTop();\n  }\n});\n\nasync function handleButtonClick() {\n  if (query) {\n    generatePagination(query, totalItems);\n    ApiService.searchQuery = query;\n    const { results } = await ApiService.getFilmOnSearch();\n    renderGalleryFilms(results);\n  } else {\n    const { results } = await ApiService.fetchTrendingMovie();\n    generatePagination('', totalItems);\n    renderGalleryFilms(results);\n  }\n}\n\nfunction backToTop() {\n  if (window.pageYOffset > 0) {\n    window.scrollBy(0, -30);\n    setTimeout(backToTop, 0);\n  }\n}\n","import { getFromStorage } from './local-storage';\n\nconst imageGalleryRef = document.querySelector('.gallery-list');\n\nexport function renderGalleryFilms(moviesCards) {\n  const markupGallery = moviesCards\n    .map(\n      ({\n        id,\n        original_title,\n        poster_path,\n        title,\n        genre_ids,\n        release_date,\n      }) => `<li class=\"gallery__item\" data-id=\"${id}\">\n        <img src=\"${renderImg(\n        poster_path\n      )}\" alt=\"${title}\" class=\"gallery_img\" width=\"395\" height=\"574\" />\n        <h2 class=\"gallery__title\">${checkTitle(original_title)}</h2>\n        <p class=\"gallery__txt\">${changeGenre(genre_ids)} | ${checkDate(\n        release_date\n      )}\n      </li>`\n    )\n    .join('');\n\n  imageGalleryRef.innerHTML = markupGallery;\n}\n\n  function renderImg(poster_path) {\n    if (poster_path) {\n      return `https://image.tmdb.org/t/p/w500${poster_path}`;\n    }\n    return `https://upload.wikimedia.org/wikipedia/commons/c/c2/No_image_poster.png?20170513175923`;\n  }\n\n  function checkDate(release_date) {\n    if (release_date) {\n      return release_date.split('-')[0];\n    }\n    return '';\n  }\n\n  function checkTitle(original_title) {\n    const arr = original_title.split('');\n\n    if (arr.length >= 33) {\n      return arr.slice(0, 33).join('') + '...';\n    }\n    return original_title;\n  }\n\n  function changeGenre(genre_ids) {\n    const genresInfo = getFromStorage('genresList');\n\n    const genreArray = [];\n\n    for (const genre_id of genre_ids) {\n      for (const genreInfo of genresInfo) {\n        if (genreInfo.id === genre_id) {\n          genreArray.push(genreInfo.name);\n        }\n      }\n    }\n    if (genreArray.length > 2) {\n      return genreArray.slice(0, 2).join(', ') + ' and Other';\n    }\n    return genreArray.join(', ');\n  }"],"names":["$byOjp","parcelRequire","$b5rV1","$29ccc077861b16e9$var$imageGalleryRef","document","querySelector","$29ccc077861b16e9$export$7303e8af20b87c34","moviesCards","markupGallery","map","id","original_title","poster_path","title","genre_ids","release_date","$29ccc077861b16e9$var$renderImg","arr","split","length","slice","join","$29ccc077861b16e9$var$checkTitle","genresInfo","getFromStorage","genreArray","genre_id","genreInfo","push","name","$29ccc077861b16e9$var$changeGenre","$29ccc077861b16e9$var$checkDate","innerHTML","$1bab9c519cfa82bc$var$ApiService","default","$1bab9c519cfa82bc$var$totalItems","$1bab9c519cfa82bc$var$query","$1bab9c519cfa82bc$export$c8bc0fd6d46e50a2","querySearch","itemsCount","page","paginationContainer","style","display","currentPage","createPageElement","pageNumber","isActive","li","createElement","textContent","classList","add","addEventListener","async","$1bab9c519cfa82bc$var$handleButtonClick","$1bab9c519cfa82bc$var$backToTop","paginationFragment","createDocumentFragment","i","appendChild","searchQuery","results","getFilmOnSearch","fetchTrendingMovie","window","pageYOffset","scrollBy","setTimeout","$7c59f4ec4043ce00$var$ApiService","$dSs1Y","Loading","standard","genresData","movieData","Promise","all","getGenres","addToStorage","genres","error","console","log","remove","$7c59f4ec4043ce00$var$startGalleryFilms"],"version":3,"file":"index.846e1222.js.map"}